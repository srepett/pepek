<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>SC MLBB by Ryuza OFFC x Zymzz</title>
    <meta property="og:title" content="SC MLBB By Ryuza OFFC x Zymzz">
    <meta property="og:description" content="SC/Script Mobile Legends adalah file menimpa tampilan,visual,suara yang asli skin MLBB Sendiri tapi hanya di lihat di DEVICE anda, Silahkan DOWNLOAD file nya secara GRATIS.!">
    <meta property="og:image" content="https://files.catbox.moe/z7fdlp.jpg">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap');
        
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #020617;
            color: #e2e8f0;
            overflow-x: hidden;
        }

        :root { --neon-cyan: #00ddff; }
        .text-neon { color: var(--neon-cyan); }
        .bg-neon { background-color: var(--neon-cyan); }
        .border-neon { border-color: var(--neon-cyan); }
        .shadow-neon { box-shadow: 0 0 15px rgba(0, 221, 255, 0.5); }
        .hover-shadow-neon:hover { box-shadow: 0 0 25px rgba(0, 221, 255, 0.4); }

        .page-section { display: none; animation: fadeIn 0.5s ease-in-out; }
        .page-section.active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }

        .bg-grid {
            background-image: linear-gradient(rgba(0, 221, 255, 0.05) 1px, transparent 1px), 
                              linear-gradient(90deg, rgba(0, 221, 255, 0.05) 1px, transparent 1px);
            background-size: 40px 40px;
        }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--neon-cyan); }

        #popup-overlay.show, #ai-modal-overlay.show { display: flex; animation: fadeIn 0.3s forwards; }
        #popup-content, #ai-modal-content { transform: scale(0.9); transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
        #popup-overlay.show #popup-content, #ai-modal-overlay.show #ai-modal-content { transform: scale(1); }

        @keyframes float-guide { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        .animate-float { animation: float-guide 2s ease-in-out infinite; }

        /* --- SKELETON LOADING STYLE --- */
        .skeleton-wrapper {
            position: relative;
            background-color: #1e293b;
            overflow: hidden;
            transition: background-color 0.3s;
        }
        
        .skeleton-wrapper.loaded-bg {
            background-color: #020617 !important; /* Warna Solid Background */
        }
        
        .skeleton-loader {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 20;
            background: linear-gradient(135deg, transparent 30%, rgba(0, 221, 255, 0.4) 50%, transparent 70%);
            transform: translate(-100%, -100%);
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer { 100% { transform: translate(100%, 100%); } }

        .content-reveal { opacity: 0; transition: opacity 0.5s ease-in-out; }
        .content-reveal.loaded { opacity: 1; }
        
        /* RAINBOW BORDER AI BUTTON */
        .btn-rainbow-border {
            position: relative;
            border-radius: 0.5rem;
            background: transparent;
            overflow: hidden;
            z-index: 1;
            transition: transform 0.3s;
            border: none;
        }
        .btn-rainbow-border:hover { transform: scale(1.05); }
        
        .btn-rainbow-border::before {
            content: ''; position: absolute; top: 50%; left: 50%; width: 300%; height: 300%;
            background: conic-gradient(
                from 0deg, 
                #ff0000, #ff8000, #ffff00, #80ff00, 
                #00ff00, #00ff80, #00ffff, #0080ff, 
                #0000ff, #8000ff, #ff00ff, #ff0080, 
                #ff0000
            );
            transform: translate(-50%, -50%); 
            animation: spin-rainbow 3s linear infinite; 
            z-index: -2;
        }
        
        .btn-rainbow-border::after {
            content: ''; position: absolute; inset: 2px; background: #0f172a; border-radius: 0.4rem; z-index: -1;
        }
        
        @keyframes spin-rainbow { 
            0% { transform: translate(-50%, -50%) rotate(0deg); } 
            100% { transform: translate(-50%, -50%) rotate(360deg); } 
        }

        .ai-typing::after {
            content: '...';
            animation: typing 1.5s steps(4, end) infinite;
        }
        @keyframes typing { 0%, 100% { opacity: 0; } 50% { opacity: 1; } }
    </style>
</head>
<body class="min-h-screen flex flex-col relative">

    <audio id="bg-music" loop>
        <source src="https://files.catbox.moe/n2upnc.mp3" type="audio/mp3">
    </audio>

    <div class="absolute inset-0 z-0 bg-grid pointer-events-none fixed"></div>

    <!-- PETUNJUK -->
    <div id="contact-guide" class="fixed top-20 right-4 z-[90] hidden flex-col items-end animate-float transition-opacity duration-500">
        <div class="bg-neon text-black font-bold text-xs md:text-sm px-4 py-3 rounded-xl relative shadow-[0_0_20px_rgba(0,221,255,0.6)] border-2 border-white max-w-[200px] text-center">
            <div class="absolute -top-2 right-6 w-4 h-4 bg-neon rotate-45 border-l-2 border-t-2 border-white"></div>
            <p class="mb-1">Ada Masalah?</p>
            <p class="text-[10px] font-normal leading-tight">Klik tombol ini untuk lapor bug atau hubungi Zymzz!</p>
            <button onclick="document.getElementById('contact-guide').remove()" class="absolute -top-2 -left-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-[10px] border border-white shadow-md hover:bg-red-600 transition-colors cursor-pointer"><i class="fa-solid fa-xmark"></i></button>
        </div>
    </div>

    <!-- POPUP INFO -->
    <div id="popup-overlay" class="fixed inset-0 z-[100] hidden items-center justify-center bg-black/80 backdrop-blur-sm px-4">
        <div id="popup-content" class="bg-slate-900 border-2 border-neon p-6 rounded-xl max-w-md w-full shadow-[0_0_50px_rgba(0,221,255,0.2)] relative overflow-hidden">
            <div class="absolute top-0 right-0 w-20 h-20 bg-neon opacity-10 rounded-full blur-2xl -mr-10 -mt-10"></div>
            <h3 class="text-xl font-black text-neon mb-4 flex items-center gap-3 border-b border-slate-800 pb-3"><i class="fa-solid fa-triangle-exclamation"></i> SERVER INFO</h3>
            <div class="text-slate-300 text-sm space-y-4 leading-relaxed">
                <p>Mohon maaf DATA file script di SERVER BELUM di masukan mohon tunggu beberapa hari.!</p>
                <p class="text-slate-400 text-xs italic border-l-2 border-neon pl-3">"Dan Jika ada menemukan bug atau semacam nya silahkan hubungi kami (Zymzz)..pencet profile di bagian kanan atas. Terima kasih"</p>
            </div>
            <button onclick="hidePopup()" class="mt-6 w-full py-3 bg-slate-800 hover:bg-neon hover:text-black text-white font-bold rounded transition-colors uppercase tracking-wider text-sm border border-slate-700 hover:border-neon">Mengerti</button>
        </div>
    </div>

    <!-- MODAL AI -->
    <div id="ai-modal-overlay" class="fixed inset-0 z-[100] hidden items-center justify-center bg-black/40 px-4">
        <div id="ai-modal-content" class="bg-slate-950 border-2 border-neon p-6 rounded-2xl max-w-lg w-full shadow-[0_0_50px_rgba(0,221,255,0.3)] relative flex flex-col max-h-[80vh]">
            <button onclick="hideAIModal()" class="absolute top-4 right-4 text-slate-400 hover:text-neon transition-colors"><i class="fa-solid fa-xmark fa-xl"></i></button>
            <div class="flex items-center gap-3 mb-6 border-b border-slate-800 pb-4">
                <div class="w-10 h-10 rounded-full bg-neon flex items-center justify-center text-black font-bold"><i class="fa-solid fa-robot"></i></div>
                <div><h3 class="text-xl font-black text-white">ZYMZZ <span class="text-neon">AI</span></h3><p class="text-xs text-slate-400">Pencari Hero & Script Pintar</p></div>
            </div>
            <div class="flex-grow overflow-y-auto mb-4 pr-2 space-y-4" id="ai-results-container">
                <div class="text-center text-slate-500 py-8" id="ai-placeholder">
                    <i class="fa-solid fa-brain fa-3x mb-4 opacity-50"></i>
                    <p class="text-sm">Bingung mau download script hero apa?</p>
                    <p class="text-xs mt-2">Ceritakan gaya mainmu, AI akan mencarikan yang pas!</p>
                </div>
            </div>
            <div class="relative">
                <input type="text" id="ai-user-input" placeholder="Contoh: Hero lincah buat culik mage..." class="w-full bg-slate-900 border border-slate-700 rounded-lg pl-4 pr-12 py-3 text-sm text-white focus:border-neon focus:outline-none focus:ring-1 focus:ring-neon transition-all">
                <button onclick="askGemini()" class="absolute right-2 top-1/2 -translate-y-1/2 w-8 h-8 bg-neon text-black rounded flex items-center justify-center hover:scale-110 transition-transform"><i class="fa-solid fa-paper-plane"></i></button>
            </div>
        </div>
    </div>

    <!-- NAVBAR -->
    <nav class="w-full h-16 border-b border-slate-800 bg-slate-950/90 backdrop-blur-md fixed top-0 z-50 shadow-lg shadow-black/50 flex items-center justify-between px-6">
        <div class="text-neon font-black text-lg md:text-2xl tracking-widest drop-shadow-[0_0_10px_rgba(0,221,255,0.8)] hover:scale-105 transition-transform cursor-default truncate mr-4">Ryuza OFFC x Zymzz</div>
        <a href="https://wa.me/6283853787611" target="_blank" class="w-10 h-10 flex-shrink-0 rounded-full bg-slate-800 border-2 border-neon flex items-center justify-center overflow-hidden shadow-[0_0_15px_rgba(0,221,255,0.5)] hover:scale-110 transition-transform cursor-pointer group hover:shadow-[0_0_25px_rgba(0,221,255,0.8)]">
            <img src="https://files.catbox.moe/timprg.jpg" alt="Zymzz Contact" class="w-full h-full object-cover group-hover:opacity-80 transition-opacity">
        </a>
    </nav>

    <!-- MAIN CONTENT -->
    <main id="app" class="pt-16 flex-grow relative z-10 w-full min-h-screen flex flex-col">
        
        <!-- 1. HOMEPAGE -->
        <section id="home-page" class="page-section active flex-col items-center justify-center h-screen px-4 text-center -mt-16">
            <h1 class="text-4xl md:text-7xl font-black text-white mb-2 tracking-tighter drop-shadow-[0_0_15px_rgba(0,221,255,0.5)]">SCRIPT <span class="text-neon">MLBB</span></h1>
            <p class="text-slate-400 mb-12 text-sm md:text-lg max-w-3xl leading-relaxed">SC/Script Mobile Legends adalah file yang menutupi tampilan,visual,suara yang asli skin MLBB Sendiri tapi hanya di lihat di DEVICE anda, Silakan DOWNLOAD file nya secara GRATIS.!</p>
            
            <div class="flex flex-col gap-4 w-full max-w-xs">
                <button onclick="router.navigateTo('/role')" class="group relative px-10 py-5 bg-transparent border-2 border-neon text-neon font-bold text-xl uppercase tracking-widest rounded-lg overflow-hidden transition-all hover:shadow-[0_0_30px_#00ddff] cursor-pointer w-full">
                    <span class="absolute inset-0 w-full h-full bg-neon opacity-0 group-hover:opacity-10 transition-opacity"></span>
                    <div class="flex items-center justify-center gap-3 relative z-10 group-hover:text-white transition-colors"><i class="fa-solid fa-download"></i><span>MULAI</span></div>
                </button>

                <button onclick="showAIModal()" class="btn-rainbow-border w-full px-6 py-3 font-bold text-sm uppercase tracking-widest text-white cursor-pointer">
                    <div class="flex items-center justify-center gap-2 relative z-10"><i class="fa-solid fa-wand-magic-sparkles text-yellow-400 drop-shadow-[0_0_5px_rgba(255,255,0,0.8)]"></i><span class="text-slate-100">CARI HERO (AI) ✨</span></div>
                </button>
            </div>

            <div class="absolute bottom-8 text-slate-600 text-[10px] md:text-sm font-mono tracking-widest">© 2025 Ryuza offc - Zymzz. All rights reserved</div>
        </section>

        <!-- 2. ROLE PAGE -->
        <section id="roles-page" class="page-section flex-col w-full max-w-5xl mx-auto p-6">
            <div class="flex items-center justify-between mb-8 border-b border-slate-700 pb-4 sticky top-16 bg-slate-950/90 backdrop-blur z-20 pt-4">
                <button onclick="router.goBack()" class="text-slate-400 hover:text-white transition-colors flex items-center gap-2 text-sm md:text-base"><i class="fa-solid fa-chevron-left"></i> Kembali</button>
                <h2 class="text-xl md:text-2xl font-bold text-white text-center">Pilih <span class="text-neon">Role</span></h2>
                <div class="w-16"></div> 
            </div>
            <div id="role-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 pb-20"></div>
            <div class="fixed bottom-0 left-0 w-full bg-slate-950 border-t border-slate-800 py-2 text-center text-slate-500 font-mono text-[10px] md:text-xs z-30 tracking-widest">© 2025 Ryuza offc - Zymzz. All rights reserved</div>
        </section>

        <!-- 3. HERO PAGE -->
        <section id="heroes-page" class="page-section flex-col w-full max-w-6xl mx-auto p-6">
            <div class="flex items-center justify-between mb-8 border-b border-slate-700 pb-4 sticky top-16 bg-slate-950/90 backdrop-blur z-20 pt-4">
                <button onclick="router.goBack()" class="text-slate-400 hover:text-white transition-colors flex items-center gap-2 text-sm md:text-base"><i class="fa-solid fa-chevron-left"></i> Role</button>
                <div class="flex items-center gap-3"><span id="current-role-icon" class="text-neon text-xl"></span><h2 id="current-role-title" class="text-xl md:text-2xl font-bold text-white uppercase tracking-wider">ROLE</h2></div>
                <div class="w-16"></div> 
            </div>
            <div id="hero-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 pb-20"></div>
            <div class="fixed bottom-0 left-0 w-full bg-slate-950 border-t border-slate-800 py-2 text-center text-slate-500 font-mono text-[10px] md:text-xs z-30 tracking-widest">© 2025 Ryuza offc - Zymzz. All rights reserved</div>
        </section>

        <!-- 4. SKIN PAGE -->
        <section id="skins-page" class="page-section flex-col w-full max-w-6xl mx-auto p-6">
            <div class="flex items-center justify-between mb-8 border-b border-slate-700 pb-4 sticky top-16 bg-slate-950/90 backdrop-blur z-20 pt-4">
                <button onclick="router.goBack()" class="text-slate-400 hover:text-white transition-colors flex items-center gap-2 text-sm md:text-base"><i class="fa-solid fa-chevron-left"></i> Pilih Hero</button>
                <div class="flex flex-col items-center">
                    <h2 id="current-hero-title" class="text-xl md:text-3xl font-black text-white uppercase tracking-widest">HERO NAME</h2>
                    <span class="text-xs text-neon font-mono tracking-widest">ALL SKINS GALLERY</span>
                </div>
                <div class="w-20 text-right"><span id="skin-count" class="text-xs text-slate-500 bg-slate-800 px-2 py-1 rounded">0 Skins</span></div>
            </div>
            <div id="skin-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 pb-24"></div>
            <div class="fixed bottom-0 left-0 w-full bg-slate-950 border-t border-slate-800 py-2 text-center text-slate-500 font-mono text-[10px] md:text-xs z-30 tracking-widest">© 2025 Ryuza offc - Zymzz. All rights reserved</div>
        </section>

    </main>

    <!-- MODULE IMPORTS -->
    <script type="module">
        import { HERO_LIST, ROLE_ICONS, ROLE_DESC } from './Database/data_name_hero.js';
        import { HERO_IMAGES } from './Database/data_img_hero.js';
        import { SKIN_LIST } from './Database/data_name_skin.js';
        import { SKIN_IMAGES } from './Database/data_img_skin.js';
        import { DOWNLOAD_LINKS } from './Database/data_file_script.js';

        // Bindings for global access
        window.HERO_LIST = HERO_LIST;
        window.ROLE_ICONS = ROLE_ICONS;
        window.ROLE_DESC = ROLE_DESC;
        window.HERO_IMAGES = HERO_IMAGES;
        window.SKIN_LIST = SKIN_LIST;
        window.SKIN_IMAGES = SKIN_IMAGES;
        window.DOWNLOAD_LINKS = DOWNLOAD_LINKS;

        const apiKey = ""; 
        const bgMusic = document.getElementById('bg-music');
        bgMusic.volume = 0.5;

        // --- ROUTER ---
        const router = {
            init: () => {
                window.onpopstate = () => router.handleLocation();
                router.handleLocation();
            },
            navigateTo: (url) => {
                history.pushState(null, null, url);
                router.handleLocation();
            },
            goBack: () => history.back(),
            handleLocation: () => {
                const path = window.location.pathname;
                const parts = path.split('/').filter(p => p);
                
                document.querySelectorAll('.page-section').forEach(el => el.classList.remove('active'));
                
                if (path === '/' || path === '/index.html') {
                    bgMusic.pause();
                    document.getElementById('home-page').classList.add('active');
                } else {
                    if (bgMusic.paused) bgMusic.play().catch(e => console.log("Audio prevented"));
                    
                    // Simple path matching
                    if (parts[0] === 'role') {
                        if (parts.length === 1) {
                            document.getElementById('roles-page').classList.add('active');
                            render.roles();
                        } else if (parts.length === 2) {
                            const roleName = decodeURIComponent(parts[1]);
                            const roleKey = Object.keys(HERO_LIST).find(k => k.toLowerCase() === roleName.toLowerCase());
                            if (roleKey) {
                                document.getElementById('heroes-page').classList.add('active');
                                render.heroes(roleKey);
                            } else router.navigateTo('/role');
                        } else if (parts.length >= 3) {
                            const roleName = decodeURIComponent(parts[1]);
                            const heroName = decodeURIComponent(parts[2]);
                            document.getElementById('skins-page').classList.add('active');
                            render.skins(heroName);
                        }
                    }
                }
            }
        };
        window.router = router;

        // --- RENDER ---
        const render = {
            roles: () => {
                const container = document.getElementById('role-grid');
                container.innerHTML = '';
                
                Object.keys(HERO_LIST).forEach(key => {
                    const btn = document.createElement('button');
                    // Style: Solid Black Background + Neon Border
                    btn.className = "group flex flex-col items-center p-8 bg-slate-950 border border-neon rounded-xl hover:bg-slate-900 transition-all duration-300 hover:-translate-y-2 hover-shadow-neon skeleton-wrapper relative overflow-hidden";
                    btn.onclick = () => router.navigateTo(`/role/${key}`);

                    const uniqueId = 'role-' + Math.random().toString(36).substr(2, 9);
                    const loaderId = uniqueId + '-loader';
                    const contentId = uniqueId + '-content';

                    const randomTime = Math.floor(Math.random() * 800) + 400;
                    setTimeout(() => {
                        if (window.revealCard) window.revealCard(uniqueId);
                    }, randomTime);

                    btn.innerHTML = `
                        <div id="${loaderId}" class="${uniqueId}-loader skeleton-loader" style="z-index: 20;"></div>
                        <div id="${contentId}" class="${uniqueId}-content content-reveal flex flex-col items-center w-full h-full relative z-10">
                            <div class="text-neon mb-4 p-4 rounded-full bg-slate-900/50 border-2 border-transparent group-hover:border-neon group-hover:shadow-[0_0_15px_rgba(0,221,255,0.6)] group-hover:scale-110 transition-all duration-300 text-3xl">
                                ${ROLE_ICONS[key]}
                            </div>
                            <h3 class="text-2xl font-black text-white mb-2 uppercase tracking-wide">${key}</h3>
                            <p class="text-slate-400 text-sm text-center font-medium">${ROLE_DESC[key]}</p>
                        </div>
                    `;
                    container.appendChild(btn);
                });
            },

            heroes: (roleKey) => {
                document.getElementById('current-role-title').innerText = roleKey;
                document.getElementById('current-role-icon').innerHTML = ROLE_ICONS[roleKey];
                const container = document.getElementById('hero-grid');
                container.innerHTML = '';

                HERO_LIST[roleKey].forEach(hero => {
                    const btn = document.createElement('button');
                    btn.className = "group flex flex-col items-center p-4 bg-slate-950 border border-neon rounded-xl hover:bg-slate-900 transition-all duration-300 hover:-translate-y-2 hover-shadow-neon skeleton-wrapper relative overflow-hidden";
                    btn.onclick = () => router.navigateTo(`/role/${roleKey}/${hero}`);

                    const uniqueId = 'hero-' + hero.replace(/[^a-zA-Z0-9]/g, '') + '-' + Math.random().toString(36).substr(2, 5);
                    const loaderId = uniqueId + '-loader';
                    const contentId = uniqueId + '-content';

                    let avatarContent = '';
                    let triggerType = 'timer';

                    if (HERO_IMAGES[hero]) {
                        avatarContent = `<img src="${HERO_IMAGES[hero]}" alt="${hero}" class="w-full h-full object-cover" onload="window.revealCard('${uniqueId}')" onerror="window.revealCard('${uniqueId}')">`;
                        triggerType = 'image';
                    } else {
                        avatarContent = hero.charAt(0);
                    }

                    if (triggerType === 'timer') {
                        const randomTime = Math.floor(Math.random() * 800) + 400;
                        setTimeout(() => { if (window.revealCard) window.revealCard(uniqueId); }, randomTime);
                    }

                    btn.innerHTML = `
                        <div id="${loaderId}" class="${uniqueId}-loader skeleton-loader" style="z-index: 20;"></div>
                        <div id="${contentId}" class="${uniqueId}-content content-reveal flex flex-col items-center w-full h-full relative z-10">
                            <div class="w-16 h-16 rounded-full bg-slate-700 mb-3 flex items-center justify-center text-2xl font-black text-slate-400 group-hover:text-neon group-hover:scale-110 transition-all border-2 border-neon overflow-hidden">
                                ${avatarContent}
                            </div>
                            <span class="text-lg font-bold text-white group-hover:text-neon transition-colors uppercase text-center">${hero}</span>
                            <span class="text-xs text-slate-500 mt-2 flex items-center gap-1 group-hover:text-white">
                                <i class="fa-solid fa-info-circle"></i> Lihat Skin
                            </span>
                        </div>
                    `;
                    container.appendChild(btn);
                });
            },

            skins: (heroName) => {
                const skins = SKIN_LIST[heroName] || SKIN_LIST.DEFAULT;
                document.getElementById('current-hero-title').innerText = heroName;
                document.getElementById('skin-count').innerText = `${skins.length} Skins`;
                const container = document.getElementById('skin-grid');
                container.innerHTML = '';

                skins.forEach((skin, idx) => {
                    let badgeColor = 'bg-neon text-black';
                    if(skin.type === 'Epic' || skin.type === 'Legend') badgeColor = 'bg-purple-600 text-white';
                    else if(skin.type === 'Elite') badgeColor = 'bg-blue-600 text-white';
                    else if(skin.type === 'Basic') badgeColor = 'bg-slate-600 text-slate-200';

                    const dlKey = `${heroName}_${skin.name}`;
                    const dlLink = DOWNLOAD_LINKS[dlKey];
                    let downloadAction = 'onclick="showPopup()"'; 
                    if (dlLink) {
                        downloadAction = `onclick="window.location.href='${dlLink}'"`;
                    }

                    const uniqueId = `skin-${idx}-${Math.random().toString(36).substr(2, 5)}`;
                    const loaderId = uniqueId + '-loader';
                    const contentId = uniqueId + '-content';

                    let skinContent = '';
                    let triggerType = 'timer';

                    const skinKey = `${heroName}_${skin.name}`;
                    const allSkinKey = `${heroName}_ALL`;

                    if (SKIN_IMAGES[skinKey]) {
                        skinContent = `<img src="${SKIN_IMAGES[skinKey]}" alt="${skin.name}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" onload="window.revealCard('${uniqueId}')" onerror="window.revealCard('${uniqueId}')">`;
                        triggerType = 'image';
                    } else if (SKIN_IMAGES[allSkinKey]) {
                        skinContent = `<img src="${SKIN_IMAGES[allSkinKey]}" alt="${skin.name}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" onload="window.revealCard('${uniqueId}')" onerror="window.revealCard('${uniqueId}')">`;
                        triggerType = 'image';
                    } else {
                        skinContent = `<i class="fa-regular fa-image text-slate-600 text-4xl group-hover:scale-125 transition-transform duration-500 group-hover:text-neon"></i>`;
                        triggerType = 'timer';
                    }

                    if (triggerType === 'timer') {
                        const randomTime = Math.floor(Math.random() * 800) + 400;
                        setTimeout(() => { if (window.revealCard) window.revealCard(uniqueId); }, randomTime);
                    }

                    const card = document.createElement('div');
                    card.className = "group relative flex flex-col bg-slate-950 rounded-xl overflow-hidden border border-neon hover:bg-slate-900 transition-all duration-300 hover:-translate-y-2 hover-shadow-neon skeleton-wrapper";
                    
                    card.innerHTML = `
                        <div id="${loaderId}" class="${uniqueId}-loader skeleton-loader" style="z-index: 20;"></div>
                        <div id="${contentId}" class="${uniqueId}-content content-reveal w-full relative z-10">
                            <div class="h-48 bg-slate-800 relative flex items-center justify-center overflow-hidden group-hover:bg-slate-700 transition-colors">
                                ${skinContent}
                                <div class="absolute top-2 right-2 px-2 py-0.5 text-[10px] font-bold uppercase rounded shadow-lg z-10 ${badgeColor}">${skin.type}</div>
                            </div>
                            <div class="p-4 pb-0">
                                <h3 class="text-lg font-bold text-white group-hover:text-neon transition-colors line-clamp-1">${skin.name}</h3>
                                <p class="text-slate-500 text-xs mt-1">Skin for ${heroName}</p>
                            </div>
                        </div>
                        <div class="p-4 mt-auto w-full relative z-30">
                            <button ${downloadAction} class="w-full py-2 bg-slate-800 hover:bg-neon hover:text-black text-white text-sm font-bold rounded transition-colors flex items-center justify-center gap-2 border border-slate-600 group-hover:border-neon">Download</button>
                        </div>
                    `;
                    container.appendChild(card);
                });
            }
        };

        // --- AI LOGIC ---
        window.askGemini = async function() {
            const input = document.getElementById('ai-user-input').value.trim();
            const resultsContainer = document.getElementById('ai-results-container');
            if (!input) return;

            const placeholder = document.getElementById('ai-placeholder');
            if (placeholder) placeholder.style.display = 'none';
            resultsContainer.innerHTML = `<div class="text-center text-neon py-4 ai-typing font-mono text-sm">Menganalisa...</div>`;

            const allHeroes = [];
            Object.values(HERO_LIST).forEach(arr => allHeroes.push(...arr));
            const heroListString = allHeroes.join(', ');

            const prompt = `Cari hero Mobile Legends dari daftar ini: [${heroListString}] yang cocok dengan input: "${input}". Prioritaskan nama hero yang persis. Respon HANYA JSON: [{"hero": "NamaHero", "reason": "Alasan singkat"}]`;

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });
                if (!response.ok) throw new Error('API Error');
                const data = await response.json();
                const textResponse = data.candidates?.[0]?.content?.parts?.[0]?.text || "[]";
                const recommendations = JSON.parse(textResponse.replace(/```json|```/g, '').trim());

                resultsContainer.innerHTML = '';
                recommendations.forEach(rec => {
                    const dbHero = allHeroes.find(h => h.toLowerCase() === rec.hero.toLowerCase());
                    if(dbHero) {
                        let heroRole = '';
                        for (const [r, heroes] of Object.entries(HERO_LIST)) {
                            if (heroes.includes(dbHero)) { heroRole = r; break; }
                        }
                        let avatar = dbHero.charAt(0);
                        if (HERO_IMAGES[dbHero]) avatar = `<img src="${HERO_IMAGES[dbHero]}" class="w-full h-full object-cover">`;

                        resultsContainer.innerHTML += `
                            <div class="bg-slate-900 border border-slate-700 p-4 rounded-xl flex gap-4 items-center hover:border-neon transition-colors cursor-pointer group" onclick="hideAIModal(); router.navigateTo('/role/${heroRole}/${dbHero}')">
                                <div class="w-12 h-12 flex-shrink-0 bg-slate-800 rounded-full flex items-center justify-center text-neon font-bold text-lg border border-slate-600 group-hover:border-neon overflow-hidden relative">${avatar}</div>
                                <div><h4 class="text-white font-bold text-sm group-hover:text-neon">${dbHero}</h4><p class="text-slate-400 text-xs">${rec.reason}</p></div>
                            </div>
                        `;
                    }
                });
                if (resultsContainer.innerHTML === '') resultsContainer.innerHTML = `<div class="text-center text-red-400">Tidak ditemukan.</div>`;
            } catch (e) {
                console.error(e);
                resultsContainer.innerHTML = `<div class="text-center text-slate-500">Gagal memuat AI.</div>`;
            }
            document.getElementById('ai-user-input').value = '';
        }

        // Global functions
        window.showPopup = showPopup;
        window.hidePopup = hidePopup;
        window.showAIModal = showAIModal;
        window.hideAIModal = hideAIModal;
        
        window.revealCard = function(cardId) {
            const loaders = document.querySelectorAll(`.${cardId}-loader`);
            const contents = document.querySelectorAll(`.${cardId}-content`);
            loaders.forEach(el => el.style.display = 'none');
            contents.forEach(el => el.classList.add('loaded'));
            contents.forEach(el => {
                const wrapper = el.closest('.skeleton-wrapper');
                if (wrapper) wrapper.classList.add('loaded-bg');
            });
        }

        window.onload = () => {
            setTimeout(() => {
                const guide = document.getElementById('contact-guide');
                if(guide) { guide.classList.remove('hidden'); guide.classList.add('flex'); }
            }, 1000);
            router.init();
        };
    </script>
</body>
  </html>
